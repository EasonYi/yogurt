/*! grunt_test-1.0.0.js 2015-11-27 */
!function(a,b,c){var d=a.ajax;a.ajax=function(c){var e={error:function(a,b,c){alert("系统错误，请联系管理员！："+b+","+c),hide_loading_bar()},success:function(a,b){}};c.error&&(e.error=c.error),c.success&&(e.success=c.success);var f=a.extend(c,{error:function(a,b,c){e.error(a,b,c)},success:function(a,c){return a.errorCode&&"-1"==a.errorCode?void(b.location.href="login.html"):void e.success(a,c)},beforeSend:function(a){},complete:function(a,b){}});f.cache=!1,d(f)};var e=function(a){function d(b,c,d,h,i,j,k){(!c||d||h)&&a.ajax({url:i,async:!1,success:function(a){var b=(j.attr("key")?j.attr("key"):"key",j.attr("value")?j.attr("value"):"value",a.result);b&&(j.attr("groupId")?f(j,b):g(j,b))}}),k&&k(j.getStore()),e(j,j.attr("multiple"))}function e(b,c){if(c)b.data("select2")&&b.data("select2").destroy&&b.data("select2").destroy(),b.val([]).select2({allowClear:!0}).on("select2-open",function(){a(this).data("select2").results.addClass("overflow-hidden").perfectScrollbar()});else{b.selectBoxIt().data("selectBoxSelectBoxIt").destroy(),b.val("").selectBoxIt({showEffect:"fadeIn",showEffectSpeed:250,hideEffect:"fadeOut",hideEffectSpeed:250}).on("open",function(){a(this).data("selectBoxSelectBoxIt").list.perfectScrollbar()});var d=b.next();d.find(".selectboxit-text").text("")}}function f(b,c){b[0].length=0,b[0].store=c;var d=b.attr("groupId"),e=b.attr("groupName"),f=b.attr("childCode"),h=a("<optgroup>");for(var i in c)h.attr("lable",c[i][e]),h.attr("id",c[i][d]),b.append(h),g(b,c[i][f],h)}function g(b,c,d){d||(b[0].length=0,b[0].store=c);for(var e in c){var f=b.attr("parseValue"),g=b.attr("key"),i=a("<option>");i.attr("value",null!=g.match(/\$/)?h(g,c[e]):c[e][g]),i.text(null!=f.match(/\$/)?h(f,c[e]):c[e][f]),d?d.append(i):b.append(i)}}function h(a,b){var c=a,d=c.match(/\${[^${}\W]+/g);for(var e in d){var f=d[e].replace("${","");b[f]&&(c=c.replace(d[e]+"}",b[f]))}return c}var i,j=null,k="",l=!0;this.getAuthorityData=function(){return i};var m=null,n=[];this.leftSelectMenuPin=function(b,c,d){b||c||d||this.gotoPage();var e,f;try{e=Number(c),f=Number(d)}catch(g){return void console.log("请输入数字或字符串的数字")}a("#"+b+">li:eq("+e+")").addClass("active"),a("#"+b+">li:eq("+e+")>a").trigger("click"),a("#"+b+">li:eq("+e+") li:eq("+f+")").addClass("active"),a("#"+b+">li:eq("+e+") li:eq("+f+")>a").trigger("click")},this.pinMenu=function(a,b){return 0>a-1||0>b-1?void this.gotoPage():void this.leftSelectMenuPin("main-menu",a-1,b-1)},this.analyticalUrlParams=function(a){if(a&&-1!=a.indexOf("?")){for(var b={},c=(a.substr(1),a.substring(a.indexOf("?")+1,a.length).split("&")),d=0;d<c.length;d++)b[c[d].split("=")[0]]=c[d].split("=")[1];return b}},this.getUrlParam=function(){return j},this.getPage=function(b,c){if(b){show_loading_bar({pct:100,delay:.8});var d=this,e=1;a.ajax({type:"get",url:"module"+b+".html?_="+Math.random().toString().substring(2,15),error:function(a){"404"==a.status&&(1===e&&(console.log("找不到该模板，加载模版失败！"),d.gotoPage("/404")),e++)},success:function(a){c(a)}})}},this.getTmpl=function(b,c){if(b){var d=this,e=1;a.ajax({type:"get",url:"tmpl"+b+".html",error:function(a){"404"==a.status&&(1===e&&(console.log("找不到该模板，加载模版失败！"),d.gotoPage("/404")),e++)},success:function(a){c(a)}})}},this.renderPage=function(b,c,d,e){if(b&&c){var f,g=null,h=this;if("object"==typeof c)g=c;else{if("string"!=typeof c)return void console.log("渲染目标必须为字符串或jq对象");if(g=a("#"+c).length?a("#"+c):a("."+c).length?a("."+c):null,!g)return void console.log("渲染目标为"+c+"的容器不存在")}f=a(b),g.fadeOut("fast",function(){a(this).children().remove(),a(this)[0].innerHTML="";for(var b in CKEDITOR.instances)CKEDITOR.instances[b]&&CKEDITOR.remove(CKEDITOR.instances[b]);try{a(this).append(f),a(this).fadeIn("normal")}catch(c){console.error(c),a(this).fadeIn("normal")}h.initCustomFormPlaceHolder(f),h.initCustomFormComponent(f),h.initHelp(),h.debug_globalVars(),d&&d(f),f=null})}},this.gotoPage=function(a,b,c){var d="/Welcome",e="";j=null,a||(a=d);var f=this;-1!=a.indexOf("?")&&(b=f.analyticalUrlParams(a),e=a,a=a.substring(0,a.indexOf("?"))),f.getPage(a,function(d){b&&(j=b),f.renderPage(d,"main-content-view",function(){k=e?e:a,c&&c()})})},this.reloadPage=function(){this.gotoPage(k)},this.getCurrentPage=function(){return k},this.ajax=function(c){var d=this;show_loading_bar({pct:100,delay:.8});var e={type:"get",timeout:2e4,async:!0,cache:!0,dataType:"json",contentType:"application/json",error:function(a,b,c){g(a,b,c)},complete:function(a,b){h(a,b)}},e=a.extend(e,c),f=e.success;e.success=function(a,c){return a.errorCode&&"-1"==a.errorCode?void(b.location.href="login.html"):a.errorCode&&"0"==a.errorCode?void d.toast.error(a.message):void(f&&f(a,c))};var g=function(a,b,c){alert("系统错误，请联系管理员！："+b+","+c),hide_loading_bar()},h=function(a,b,c){({date:a.getResponseHeader("Date"),contentEncoding:a.getResponseHeader("Content-Encoding"),connection:a.getResponseHeader("Connection"),contentLength:a.getResponseHeader("Content-Length"),server:a.getResponseHeader("Server"),vary:a.getResponseHeader("Vary"),transferEncoding:a.getResponseHeader("Transfer-Encoding"),contentType:a.getResponseHeader("Content-Type"),cacheControl:a.getResponseHeader("Cache-Control"),exprires:a.getResponseHeader("Exprires"),lastModified:a.getResponseHeader("Last-Modified")})};return e.url?(-1!==e.url.indexOf(".do")&&(e.contentType="application/x-www-form-urlencoded"),void a.ajax(e)):void console.log("url为必须的参数")},this.initCustomFormPlaceHolder=function(b){if("object"==typeof b&&b.length){for(var c,d=0;d<b.length;d++)if(b[d].tagName){c=a(b[d]);break}if(!c)return void console.log("初始化表单失败！");var e=c.find("div.form-group>label").next();e.each(function(){var b=a(this);if(!b.hasClass("no-placeholder")){var c=b[0].tagName;b.removeAttr("placeholder"),b.removeClass("error"),b.parent().find("label.error").length&&b.parent().find("label.error").remove();var d=b.prev().text(),e=40;d&&(e+=15*d.length),b.css({"padding-right":e+"px"});var f=a('<span class="DF-placeHolder pleft">'+d+"</span>");f.click(function(){"DIV"==c?b.find("input").trigger("focus"):b.trigger("focus")}),(b.val()||"DIV"==c&&b.next().val())&&f.addClass("pright"),b.parent().find("span.DF-placeHolder").remove(),b.parent().append(f),"DIV"==c?(b.find("input").focus(function(){f.addClass("pright").fadeIn(250)}),b.next().bind("select propertychange",function(){a(this).val()?a(this).parent().find("span.DF-placeHolder").addClass("pright").fadeIn(250):a(this).parent().find("span.DF-placeHolder").removeClass("pright").fadeIn(250)})):"SELECT"==c?b.unbind("input propertychange").bind("input propertychange",function(){a(this).val()&&a(this).parent().find("span.DF-placeHolder").addClass("pright")}):(b.blur(function(){b.val()?f.addClass("pright").fadeIn(250):f.removeClass("pright").fadeIn(250)}),b.focus(function(){f.fadeOut(250)}))}}),e.bind("input propertychange",function(){a(this).val()&&a(this).parent().find("span.DF-placeHolder").addClass("pright")})}else console.log("初始化表单失败!")};var o="";this.showModal=function(b,c,d){function e(a,b){k.children().remove(),b&&a==o?j.children().reset():(j.text(""),j.children().remove())}var f=d||"_LYModal",g=this,h=a("#"+f+" div.modal-header"),j=a("#"+f+" div.modal-body"),k=a("#"+f+" div.modal-footer"),l=a("#_validate_btn")||a('<button id="_validate_btn" type="submit" class="hidden"></button>'),m={backdrop:"static",title:"Modal",cache:d?!1:!0,width:"600px"},m=a.extend(m,b);if(!m.dom)return void console.log("模态窗口必须提供展示内容且为字符串或者jqdom对象！");var n,p=!1;m.dom instanceof jQuery?n=a(m.dom):m.dom instanceof Object&&(n=a(m.dom.form),p=m.dom.readOnly),e(n.selector,m.cache),m.cache&&n.selector==o||j.append(n.html()),d||(o=n.selector),g.setFormReadOnly(j.children(),p),g.initCustomFormComponent(j.children()),g.initCustomFormPlaceHolder(j.children()),a("#"+f+" .modal-dialog").css({width:m.width}),h.find("h4").text(m.title);var q=[];if(b.btns&&b.btns.length)for(var r=b.btns,s=0;s<r.length;s++){var t=r[s];if(!t.authCode||i&&-1!=i.indexOf(t.authCode)){var u={valid:!0};u=a.extend(u,t),q[s]=u;var v=a('<button type="button" class="btn btn-white"></button>');v.attr("index",s),v.attr("id",u.id),v.text(u.text),u["class"]&&v.removeClass("btn-white").addClass(u["class"]),u.icon&&v.append('<i class="'+u.icon+'">'),u.fn&&v.click(function(){var b=a(this).attr("index");q[b].valid?(x.append(l),l.trigger("click"),x.valid()&&q[b].fn.call(a(this),w)):q[b].fn.call(a(this),w)}),k.append(v)}}var w=a("#"+f).modal("show",m);w.getForm=function(){return j.children()};var x=w.getForm();return x.validate({debug:!0}),w.destroy=function(){h.find("h4").text(""),j.children()&&j.children().remove(),k.children()&&k.children().remove(),h=null,j=null,k=null},c&&c(w),w},this.hideModal=function(a){a.modal("hide")},this.setFormReadOnly=function(b,c){if(b instanceof jQuery&&b.length)if(c){b.addClass("DF-form-readonly");var d=b.find("div.form-group label").next();d.each(function(){var b=a(this);b.setReadOnly()})}else{b.removeClass("DF-form-readonly");var d=b.find("div.form-group label").next();d.each(function(){var b=a(this);b.hasClass("iswitch")&&"checkbox"==b.attr("type")&&(b.show(),b.next().hide(),b.parent().find("span").hide(),b.parent().find("label").css("cssText","display: block!important")),b.next()[0]&&"SELECT"==b.next()[0].tagName&&(b=b.next()),b.hasClass("ckeditor")?(CKEDITOR.on("instanceReady",function(a){b.next().show(),b.parent().find(".ck_text_view").remove()}),setTimeout(function(){},"200")):(b[0].readOnly=!1,b[0].disabled=!1),"true"==b.attr("forView")&&b.parent().addClass("hidden")})}else console.log("入参为jquery对象的form")},a.fn.setReadOnly=function(){var b=a(this);if(b.next()[0]&&"SELECT"==b.next()[0].tagName&&(b=b.next()),b.hasClass("iswitch")&&"checkbox"==b.attr("type")&&(b.hide(),b.next().show(),b.parent().append('<span class="DF-placeHolder pleft pright">'+b.parent().find("label").text()+"</span>"),b.parent().find("label").css("cssText","display: hidden!important")),b.hasClass("ckeditor")){if(CKEDITOR.on("instanceReady",function(c){if(0==b.parent().find(".ck_text_view").length){var d=a('<div class="ck_text_view uk-htmleditor-preview" style="margin:30px 0 0 10px;display: inline-block;">');b.parent().append(d),b.next().hide()}}),CKEDITOR.instances[b.attr("id")])if(0==b.parent().find(".ck_text_view").length){var c=a('<div class="ck_text_view uk-htmleditor-preview" style="margin:30px 0 0 10px;display: inline-block;">');b.parent().append(c),b.next().hide()}else b.parent().find(".ck_text_view").html("")}else b[0].readOnly=!0,b[0].disabled=!0;"true"==b.attr("forView")&&b.parent().removeClass("hidden")},this.setFormValues=function(b,c){if(c instanceof jQuery){var d=c.find("div.form-group label").next();d.each(function(){var d=a(this);d.next()[0]&&"SELECT"==d.next()[0].tagName&&(d=d.next());var e=d.attr("name"),f=d[0].tagName;for(var g in b)if(g==e){if(d.hasClass("iswitch")&&"checkbox"==d.attr("type")){var h="",i=d.is(":checked"),h="";1==b[g]||"true"==b[g]||"1"==b[g]?(h="是",i||d.trigger("click")):(h="否",i&&d.trigger("click")),d.val(b[g]),d.next().val(h);break}if("INPUT"==f){d.val(b[g]);break}if("SELECT"==f){if(d.attr("multiple")){var j=[];if(d.attr("jsonListParseKey"))for(var k in b[g])j[k]=b[g][k][d.attr("jsonListParseKey")];else j=b[g]&&b[g].split(",");d.val(j).trigger("change")}else d.val(b[g]).trigger("change"),b[g]||(d.val("").trigger("change"),d.next().find(".selectboxit-text").text(""));break}if("TEXTAREA"==f){d.val(b[g]),d.hasClass("ckeditor")&&setTimeout(function(){CKEDITOR.instances.content&&CKEDITOR.instances.content.setData(b[g]),c.hasClass("DF-form-readonly")&&d.parent().find(".ck_text_view").html(b[g])},300);break}break}})}},this.toast=function(){return toastr.options={closeButton:!0,debug:!0,positionClass:"toast-bottom-right",onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"3000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},{success:function(b,c,d){c||(c="提示"),a.extend(toastr.options,d),toastr.success(b,c)},error:function(b,c,d){c||(c="提示"),a.extend(toastr.options,d),toastr.error(b,c)},info:function(b,c,d){c||(c="提示"),a.extend(toastr.options,d),toastr.info(b,c)},warning:function(b,c,d){c||(c="提示"),a.extend(toastr.options,d),toastr.warning(b,c)}}}(),this.initCustomFormComponent=function(b,c){if("object"==typeof b&&b.length){for(var d,e=0;e<b.length;e++)if(b[e].tagName){d=a(b[e]);break}if(!d)return void console.log("初始化表单失败！");var f=d.find("div.form-group label").next();f.each(function(){var b=a(this);b.next()[0]&&"SELECT"==b.next()[0].tagName&&(b=b.next());var e=b[0].tagName;if("INPUT"==e)b.attr("datetype")&&b.initDateComponent(b.attr("datetype")),b.attr("displayvalue")&&(b.val(b.attr("displayvalue")),b.on("click",function(){var a=b.val()==b.attr("displayvalue")?"":b.val();b.val(a)}));else if("SELECT"==e){var f=b.attr("dataurl");b.initCombobox(f,c)}else if("TEXTAREA"==e&&b.hasClass("ckeditor")){var g=b.attr("id");CKEDITOR.instances[g]||b.ckeditor(),d.hasClass("DF-form-readonly")?(b.next().hide(),b.parent().find(".ck_text_view").show()):(b.next().show(),b.parent().find(".ck_text_view").hide())}})}else console.log("初始化表单失败!")},a.fn.initDateComponent=function(){a(this).attr("datetype")?a(this).datepicker({format:"yyyy-mm-dd",template:"modal",showInputs:!1,time:"datetime"==a(this).attr("datetype")?!0:!1}):console.log("时间组件初始化失败！")},a.fn.initCombobox=function(b,c){var e=a(this);e.selectBoxIt().data("selectBoxSelectBoxIt").destroy();var f="undefined"==e.attr("autoload")||"false"==e.attr("autoload")?!1:!0,g="function"==typeof b?e.attr("dataurl"):b,c="function"==typeof b?b:c,h=e.attr("dataurl")==g?!1:!0,i="string"==typeof b?!0:!1,j=0==e[0].length?!1:!0;d(i,j,f,h,g,e,c)},a.fn.getStore=function(){var b=a(this);return b[0].store},a.fn.cleanStore=function(){var b=a(this);b[0].length=0},this.validate=function(b){if(b.length){var c=a('<button id="_validate_btn" type="submit" class="hidden"></button>');return b.append(c),b.validate({debug:!0}),c.trigger("click"),c.remove(),b.valid()}console.log("请传入jq.form对象")},this.addValid=function(b,c,d){"string"==typeof b&&"function"==typeof c&&a.validator.addMethod(b,function(a,b){return c(a,b)},d?d:"验证不通过")},this.dataTable=function(b){function d(c,d,e,f){var g=f.ajax,h=b.beforeLoad||function(){},i=b.afterLoad||function(){};h(),a.ajax({type:"get",url:g,dataType:"json",data:d,success:function(a){i(),a.result&&e(a.result)}})}function e(){var a=[];for(var b in n)null!==n[b]&&a.push(n[b]);return a}var f=this;if(!(b.id&&b.ajax&&b.columns))return void console.log("table的ID、列、请求url为必要参数!");if(!a.isArray(b.columns))return void console.log("columns必须为数组!");var g,h=b.columns,j=b.id,k=b.ajax,l=(h[0].data,b.viewForm),m=b.multiple,n={},o=b.searchable===c||b.searchable===!0?!0:!1,p=function(a){var b={dom:{form:l,readOnly:!0},width:"700px",title:"详情页面"};f.showModal(b,function(b){var c=b.getForm();f.setFormValues(a,c)})},q=function(){},r=b.searchCol?b.searchCol:[1],s=b.toolbtns?b.toolbtns:[],t=b.rowbtns?b.rowbtns:[],u=[];t.length&&u.push({render:function(b,c,d){for(var e=a('<td><div class="option" style="min-width: 102px;text-align: center">'),f=e.find("div.option"),g=0;g<t.length;g++){var h=t[g];if((!h.authCode||i&&-1!=i.indexOf(h.authCode))&&(!h.displayValue&&!d[h.displayKey]&&!h.displayReg||h.displayValue&&d[h.displayKey]&&h.displayValue==d[h.displayKey]&&!h.displayReg||!h.displayValue&&!d[h.displayKey]&&h.displayReg&&h.displayReg(d))){var j=a("<a>");j.attr({href:"javascript:;",name:h.name,"class":"btn btn-sm btn-icon icon-left",code:h.code,index:g}),j.text(t[g].text),h["class"]&&j.addClass(h["class"]),f.append(j)}}var k=102+46*(f.find("a").length-2);return f.css("min-width",k+"px"),e.html()},targets:h.length}),l&&u.push({render:function(a,b,c){var d="<a style='color:#979898;cursor:pointer;text-decoration: underline;' name='view'>"+a+"</a>";return d},targets:1}),m&&u.push({render:function(a,b,c){var d='<label class="cbr-inline"><div class="cbr-replaced"><div class="cbr-input"><input type="checkbox" class="cbr cbr-done"></div><div class="cbr-state"><span></span></div></div></label>';return d},targets:0});var v={sAjaxSource:k,fnServerData:d,serverSide:!0,bLengthChange:!1,bAutoWidth:!0,bSort:!0,bFilter:!1,bDestroy:!0,bDeferRender:!0,language:{sProcessing:"处理中...",sLengthMenu:"显示 _MENU_ 条结果",sZeroRecords:"没有匹配结果",sInfo:"显示 _START_ 至 _END_ 条结果，共 _TOTAL_ 条",sInfoEmpty:"显示 0 至 0 条结果，共 0 条",sInfoFiltered:"(有 _MAX_ 项结果过滤)",sInfoPostFix:"",sSearch:"搜索:",sUrl:"",sEmptyTable:"表格数据为空",sLoadingRecords:"载入中...",sInfoThousands:",",oPaginate:{sFirst:"首页",sPrevious:"上页",sNext:"下页",sLast:"末页"},oAria:{sSortAscending:": 以升序排列此列",sSortDescending:": 以降序排列此列"}}};v=a.extend(v,b);var w=function(){var c=this,d=c.selector,f=a(d+"_wrapper div.row").first();f.children().remove();var k=[];a(d+" tr th").each(function(b){a.isArray(r)?"":r=[r],-1!=r.indexOf(b+1)&&k.push(a(this).text())}),k=k.join("/");var l=11.56*k.length+20+"px",n='<div class="col-xs-6"><label class="pull-left hidden"><input type="search" class="form-control input-sm" placeholder="'+k+'" style="min-width:153px;width:'+l+'"><button id="'+j+'_search"type="button" class="btn btn-sm btn-success pull-right icon-right">确定<i class="linecons-search"></i></button></label></div>';n=a(n),o&&n.find("label").removeClass("hidden");var p=a('<div class="col-xs-6 df_datatable_toolbar" id="'+j+'_toolbar">');if(s.length)for(var t=[],u=0;u<s.length;u++){var v=s[u];if(!v.authCode||i&&-1!=i.indexOf(v.authCode)){var w=a("<button>");t[u]=v,w.attr({name:v.name,type:"button","class":"btn btn-success pull-right icon-right",index:u}),w.text(v.text),v["class"]&&w.addClass(v["class"]),v.icon&&w.append('<i class="'+v.icon+'">'),w.click(function(){var b=a(this).attr("index"),c=e();m?t[b].fn&&t[b].fn(c):t[b].fn&&t[b].fn()}),p.append(w)}}f.append(n).append(p);var x=g.ajax.url(),y=x+"?";a(d+"_search").click(function(){var c=a(this).prev().val();if(c){for(var d=0;d<r.length;d++)y+=h[r[d]].data+"="+c,d+1!=r.length&&(y+="&");g.ajax.url(y),y=x+"?",b.reloadGrid?b.reloadGrid():q()}else g.ajax.url(x),b.reloadGrid?b.reloadGrid():q()}),b.initComplete&&b.initComplete()},x=function(c,d,e){for(var f=[],g=0;g<t.length;g++){var h=t[g].name;f[g]=t[g],a("td a[name="+h+"]",c).unbind("click").click(function(){var b=a(this).attr("index");f[b].fn(d)})}a("td a[name=view]",c).click(function(){p(d)}),m&&(a(c).click(function(b){var c=b.target.tagName;if("A"!=c){var f=a(this),g=f.find("td").first().find(".cbr-replaced");g.hasClass("cbr-checked")?(g.removeClass("cbr-checked"),n[e]=null):(g.addClass("cbr-checked"),n[e]=d)}}),a(c).find(".cbr-state").click(function(b){var c=a(this),f=c.parent();f.hasClass("cbr-checked")?(f.removeClass("cbr-checked"),n[e]=null):(f.addClass("cbr-checked"),n[e]=d)})),b.createdRow&&b.createdRow(c,d,e)};return v.createdRow=x,v.columnDefs=v.columnDefs?u.concat(v.columnDefs):u,v.initComplete=w,a("#"+j+" tbody").hide(),g=a("#"+j).DataTable(v).on("draw",function(b,c){a("#"+j+" tbody").show()}),m&&(g.getSelectedRows=e),g},this.initHelp=function(){var b=document.querySelectorAll("*[data-intro]").length;0!=b?a("#showHelp").unbind("click").click(function(){introJs().setOptions({nextLabel:"下一步 &rarr;",prevLabel:"&larr; 上一步",skipLabel:"跳过",doneLabel:"完成",exitOnOverlayClick:!1,exitOnEsc:!1,tooltipPosition:"auto",positionPrecedence:["left","right","bottom","top"],showBullets:!1}).start()}).removeClass("hidden"):a("#showHelp").unbind("click").addClass("hidden")},this.initApp=function(){l?(b.__getSecurityRoleBtns&&(i=__getSecurityRoleBtns()),m=function(){var a={};for(var c in b)a[c]=!0;var d=function(){var c=[];for(var d in b)a[d]||c.push(d);return c};return{detect:d}}(),m.detect(),l=!1,a(document).keydown(function(b){var c=b.keyCode;17==c&&a("#main-content-view").unbind("click").click(function(b){var c=DF.getCurrentPage();console.log(c),a("#_LYModal_TIPS").find(".modal-title").text("当前页面"),a("#_LYModal_TIPS").find(".modal-body").text(c),a("#_LYModal_TIPS").modal("show",{backdrop:"fade"})})}).keyup(function(){a("#main-content-view").unbind("click")})):console.error("初始化系统失败!")},this.on=function(b,c,d){function e(){return h}function f(){return i}var g="formChange",h=!1,i=null;if(g==b)if(c instanceof jQuery&&1==c.length&&"FORM"==c[0].tagName){var j=c;j.find("div.form-group label").next().each(function(){var b=a(this),c=b[0].tagName;if("INPUT"==c||"TEXTAREA"==c)b.bind("input propertychange",function(){return h=!0,i=b,d&&d(b),!0});else if("SELECT"==c)b.bind("propertychange",function(){return h=!0,i=b,d&&d(b),!0});else if("DIV"==c){var e=b.next();e.bind("propertychange",function(){return h=!0,i=b,d&&d(e),!0})}}),a("form input:radio,form input:checkbox").each(function(){var b=a(this),c=b.attr("name");a("input[name="+c+"]").change(function(){return h=!0,i=b,d&&d(b),!0})})}else console.log("入参为一个jq的Form对象");return{isChange:e,changeObj:f}},this.createWindow=function(b,c){var d,e,f=this;if("object"==typeof b)d=b;else if("string"==typeof b){e=b;var d={dom:a("#"+b),title:"请选择",width:"800px",btns:[{text:"确定 ",valid:!1,"class":"btn btn-primary",fn:function(a){c&&c(f.getComponent(e),a)}}]}}this.showModal(d,null,"_LYModal_Component")},this.create=function(b,c,d){var e,f,g=this;if(f="string"==typeof c?a("#"+c):c,"object"==typeof b);else if("string"==typeof b){e=b;var h=a("#"+e).html();f.append(h),d&&d(f,g.getComponent(e))}},this.callbackComponent=function(b){for(var d in b){var e=!0;if(!n.length){"object"==typeof b&&n.push(b);break}for(var f=0;f<n.length;f++)n[f][d]!==c&&(e=!1,n[f][d]=a.extend(n[f][d],b[d]));e&&n.push(b)}},this.getComponent=function(a){var b=null;if(a){for(var c=0;c<n.length;c++)if(n[c][a]){b=n[c][a];break}}else b=n;return b},this.debug_globalVars=function(){var a=17,b=m.detect(),c=[];if(b.length>a)for(var d=a;d<b.length;d++)c.push(b[d]);c.length&&console.warn("暴露为全局的对象如下："+c+",共"+c.length+"个")},this.initFooter=function(){if(a(".main-content").height()-a(b).height()<0){var c=a(b).height()-a("#main-content-view").height()-a(".navbar.horizontal-menu").height()-48;public_vars.$mainFooter.css("marginTop",c)}else public_vars.$mainFooter.css("marginTop",0)}};b.DF=new e(a),a.extend(a.validator.messages,{required:"必选字段",remote:"请修正该字段",email:"请输入正确格式的电子邮件",url:"请输入以“http://”或“https://”为开头的网址",date:"请输入合法的日期",dateISO:"请输入合法的日期 (ISO).",number:"请输入合法的数字",digits:"只能输入整数",creditcard:"请输入合法的信用卡号",equalTo:"请再次输入相同的值",accept:"请输入拥有合法后缀名的字符串",maxlength:a.validator.format("请输入一个长度最多是 {0} 的字符串"),minlength:a.validator.format("请输入一个长度最少是 {0} 的字符串"),rangelength:a.validator.format("请输入一个长度介于 {0} 和 {1} 之间的字符串"),range:a.validator.format("请输入一个介于 {0} 和 {1} 之间的值"),max:a.validator.format("请输入一个最大为 {0} 的值"),min:a.validator.format("请输入一个最小为 {0} 的值")}),a.fn._val=a.fn.val,a.fn.val=function(b){return b===c?a(this)._val():(a(this)._val(b),a(this).trigger("propertychange"),a(this).trigger("focusout"),a(this))},a.fn.reset=function(){var b=a(this);b.find("div.form-group label").next().each(function(){var b=a(this),c=b[0].tagName;return"INPUT"==c||"TEXTAREA"==c?(b.val(""),!0):"SELECT"==c?(b.val("").trigger("change"),!0):"DIV"==c?(b.val([]).trigger("change"),!0):void 0})},a.fn.DFSelect=function(){},a.fn.serializeObject=function(){var b={},c=this.serializeArray();return a.each(c,function(){if(b[this.name])b[this.name].push||(b[this.name]=[b[this.name]]),b[this.name].push(this.value||"");else{var a=this.value;"string"==typeof a?a&&(a=a.replace&&a.replace(/(^\s*)|(\s*$)/g,"")):a,b[this.name]=a||""}}),b},a.fn.showLoading=function(){var b=a(this),c="fa fa-spin fa-circle-o-notch",d="";b.find("i").length&&b.find("i").remove(),b.append('<i class="'+c+'">'),b.addClass("disabled").attr({disabled:"disabled"}),b.o_class=d},a.fn.hideLoading=function(){var b=a(this),c="fa fa-spin fa-circle-o-notch";b.find("i").removeClass(c),b.o_class&&b.find("i").addClass(b.o_class),b.removeClass("disabled").removeAttr("disabled")}}(jQuery,window);