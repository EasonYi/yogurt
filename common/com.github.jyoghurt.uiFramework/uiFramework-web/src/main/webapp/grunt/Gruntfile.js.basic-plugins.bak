//包装函数
module.exports = function(grunt){
	//任务配置，所有插件的配置信息
	grunt.initConfig({
		//获取 package.json  的信息
		pkg:grunt.file.readJSON('package.json'),
		//concat(js 合并插件)的配置信息
		concat:{
			options: {
				 separator: ';',
				 stripBanners: true
			 },
			build: {
				 src: [
					 "../assets/js/ztree/js/jquery.ztree.core-3.5.js",
					 "../assets/js/ztree/js/jquery.ztree.excheck-3.5.js",
					 "../assets/js/ztree/js/jquery.ztree.exedit-3.5.js",
					 "../assets/js/dropzone/dropzone.min.js",
					 "../assets/js/datatables/js/jquery.dataTables.min.js",
					 "../assets/js/datatables/dataTables.bootstrap.js",
					 "../assets/js/datatables/yadcf/jquery.dataTables.yadcf.js",
					 "../assets/js/jquery-validate/jquery.validate.min.js",
					 "../assets/js/select2/select2.min.js",
					 "../assets/js/jquery-ui/jquery-ui.min.js",
					 "../assets/js/selectboxit/jquery.selectBoxIt.min.js",
					 "../assets/js/multiselect/js/jquery.multi-select.js",
					 "../assets/js/datepicker/bootstrap-datepicker.js",
					 "../assets/js/timepicker/bootstrap-timepicker.min.js",
					 "../assets/js/introjs/js/intro.min.js",
					 "../assets/js/moment.min.js",
					 "../assets/js/daterangepicker/daterangepicker.js",
					 "../js/jquery.zclip.min.js",
					 "../js/jquery.qrcode.min.js",
					 "../js/template.js"
					 
				 ],
				 dest: "../build/js/all.js"
			}
		},
		//uglify(js压缩插件)的配置信息
		
		uglify:{
			options:{
				strpBanners:true,
				banner:'/*! <%=pkg.name%>-<%=pkg.version%>.js <%=grunt.template.today("yyyy-mm-dd") %> */\n'
			},
			build:{
				src:'../build/js/all.js',
				dest:'../build/js/<%=pkg.name%>-<%=pkg.version%>-basic-plugins.js'
			}
		},
		//js拼写检查
		jshint:{
			options:{
				jshintrc:'.jshintrc'							
			},
			build:['Gruntfile.js','src/test.js']
		},
		//CSS 压缩 合并
		cssmin: {
		  options: {
			shorthandCompacting: false,
			roundingPrecision: -1
		  },
		  target: {
			files: {
			  '../build/css/<%=pkg.name%>-<%=pkg.version%>-basic-plugins.css':[
			  '../assets/js/dropzone/css/dropzone.css', 
			  '../assets/js/select2/select2.css',
			  '../assets/js/select2/select2-bootstrap.css',
			  '../assets/js/multiselect/css/multi-select.css',
			  '../assets/js/introjs/css/introjs.min.css',
			  '../assets/js/ztree/css/zTreeStyle/cTreeStyle.css',
			  '../assets/js/daterangepicker/daterangepicker-bs3.css'
			  ]
			}
		  }
		},
		//清除文件
		clean:['../build/*']
		
	});
	//加载 插件
	grunt.loadNpmTasks('grunt-contrib-concat');
	grunt.loadNpmTasks('grunt-contrib-uglify');
	grunt.loadNpmTasks('grunt-contrib-jshint');
	grunt.loadNpmTasks('grunt-contrib-clean');
	grunt.loadNpmTasks('grunt-contrib-cssmin');
	//告诉grunt当我们在终端输入grunt时需要做些什么（注意先后顺序）
	grunt.registerTask('default',function(){
		//清除
		//grunt.task.run(['clean']);
		//合并JS
		grunt.task.run(['concat']);
		//压缩JS
		grunt.task.run(['uglify']);
		//压缩合并CSS
		grunt.task.run(['cssmin']);
	});
	//grunt.registerTask('default',['concat'],['uglify']);
	//grunt.registerTask('default',['clean']);
};